:root{
  --wrap: 1100px;
  --glass: rgba(255,255,255,.08);
  --border: rgba(255,255,255,.12);
}

*{box-sizing:border-box}
html{scroll-behavior:smooth}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:#000;
  color:#fff;
  transition: background 0.6s ease, color 0.6s ease;
}

.stars{
  position:fixed; inset:0;
  pointer-events:none;
  opacity:.7;
  background-image:
    radial-gradient(circle at 10% 20%, rgba(255,255,255,0.18) 0 1px, transparent 2px),
    radial-gradient(circle at 80% 30%, rgba(110,231,183,0.14) 0 1px, transparent 2px),
    radial-gradient(circle at 30% 70%, rgba(59,130,246,0.16) 0 1px, transparent 2px),
    radial-gradient(circle at 70% 80%, rgba(255,255,255,0.10) 0 1px, transparent 2px);
  background-size: 420px 420px;
}

.wrap{max-width:var(--wrap); margin:0 auto; padding:0 20px;}

/* ======================================================= */
/* VISTAS DE PÁGINA (SISTEMA SPA) - SOLUCIÓN PARPADEO      */
/* ======================================================= */
.view-page { display: none; }
.view-page.active { display: block; }

/* ======================================================= */
/* NAV BAR Y LA CORTINA (EL TRUCO DEL RELEVO)              */
/* ======================================================= */
.nav-sticky { position: sticky; top: 14px; z-index: 999; }

/* 1. EL ESTADO NORMAL DE LA BARRA */
.nav { 
  position: relative; 
  display: flex; flex-wrap: wrap; align-items: center; justify-content: center; gap: 10px; padding: 10px; z-index: 1000; 
  background: rgba(255, 255, 255, 0.75); 
  border: 1px solid rgba(255, 255, 255, 0.2); 
  backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
  border-radius: 30px; /* Usamos 30px fijos para que nunca haga el efecto "círculo" al estirarse */
  transition: background 0.1s, backdrop-filter 0.1s, border-color 0.1s, box-shadow 0.1s;
}

/* 2. EL TRUCO: Al bajar la cortina, apagamos la barra para que no se sumen los colores */
body.transitioning .nav {
  background: transparent;
  backdrop-filter: none; -webkit-backdrop-filter: none;
  border-color: transparent;
  box-shadow: none;
}

/* 3. LA CORTINA ORIGINAL */
.nav-curtain {
  position: absolute;
  top: 0; left: 0; right: 0; 
  height: 100%; 
  background: rgba(255, 255, 255, 0.75); 
  backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,0.2); 
  border-radius: 30px;
  z-index: -1; pointer-events: none; opacity: 0;
  /* CAMBIO: Al subir, la altura tarda 0.6s. La opacidad ESPERA 0.4s y se va suavecito al final */
  transition: height 0.6s cubic-bezier(0.76, 0, 0.24, 1), opacity 0.2s ease 0.4s;
}

/* 4. LA ANIMACIÓN DE CAÍDA */
body.transitioning .nav-curtain {
  opacity: 1; 
  height: 100vh; 
  box-shadow: 0 20px 50px rgba(0,0,0,0.15);
  /* CAMBIO: Al bajar, se vuelve opaca al instante (0s de espera) */
  transition: height 0.6s cubic-bezier(0.76, 0, 0.24, 1), opacity 0.1s ease 0s;
}

.morph-pill, .intro-btn { background: rgba(255, 255, 255, 0.75); border: 1px solid rgba(0, 0, 0, 0.1); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15); }
.intro-btn { color: #111; padding: 12px 24px; border-radius: 999px; font-weight: 700; cursor: pointer; transition: 0.25s ease; }
.intro-btn:hover { background: rgba(255, 255, 255, 0.9); transform: translateY(-2px); }
.morph-pill { position: fixed; z-index: 7000; border-radius: 999px; left: var(--x); top: var(--y); width: var(--w); height: var(--h); pointer-events: none; }
.pill { color: rgba(0, 0, 0, 0.75); text-decoration: none; padding: 10px 14px; border-radius: 999px; font-weight: 600; transition: .2s; cursor: pointer; }
.pill:hover { color: #000; background: rgba(0, 0, 0, 0.08); }
.pill.cta { background: #000; color: #fff; font-weight: 700; }

/* MENÚS DESPLEGABLES (CON PUENTE INVISIBLE SEGURO) */
.nav-group { position: relative; display: inline-block; }
.nav-group::after { content: ""; position: absolute; top: 100%; left: -20px; right: -20px; height: 30px; z-index: 1; } /* Puente anti-caída del mouse */

.nav-dropdown {
  position: absolute; top: calc(100% + 10px); left: 50%; transform: translateX(-50%);
  background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
  border-radius: 16px; padding: 8px; display: flex; flex-direction: column; gap: 4px;
  opacity: 0; visibility: hidden; transition: 0.3s cubic-bezier(0.2, 0.9, 0.2, 1);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2); z-index: 10;
}
.nav-group:hover .nav-dropdown { opacity: 1; visibility: visible; }
.nav-dropdown a { color: #222; text-decoration: none; padding: 10px 18px; border-radius: 8px; font-size: 14px; font-weight: 600; white-space: nowrap; transition: 0.2s; }
.nav-dropdown a:hover { background: rgba(0,0,0,0.06); color: #000; }

/* ========================================= */
/* ===== ESPACIOS Y TÍTULOS GLOBALES ======= */
/* ========================================= */
main.wrap { padding-top: 80px; } /* Despega el primer título de la barra superior */

.section { 
  /* CAMBIO AQUÍ: Bajamos de 30px a 10px el espaciado vertical */
  padding: 10px 0; 
  scroll-margin-top: 120px; 
}

/* TÍTULOS Y FLECHITAS CENTRADOS JUNTOS */
.section-header { 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  gap: 12px; 
  /* CAMBIO AQUÍ: Bajamos de 20px a 10px el espacio debajo del título */
  margin-bottom: 10px; 
}

.section-header .h2 { 
  margin: 0; 
  font-size: clamp(24px, 4vw, 36px); 
  font-weight: 300; 
  letter-spacing: -0.5px; 
}

/* BOTÓN DE FLECHA (Acompaña al texto) */
.toggle-btn { 
  position: relative; 
  background: rgba(255, 255, 255, 0.08); border: 1px solid rgba(255, 255, 255, 0.2); 
  color: #fff; border-radius: 50%; width: 40px; height: 40px; 
  display: flex; align-items: center; justify-content: center; 
  cursor: pointer; transition: 0.3s ease; flex-shrink: 0; 
}
.toggle-btn:hover { background: rgba(255, 255, 255, 0.15); transform: scale(1.05); }
.toggle-btn svg { transition: transform 0.4s cubic-bezier(0.2, 0.9, 0.2, 1); }
.toggle-btn.active svg { transform: rotate(180deg); }

.toggle-content { display: grid; grid-template-rows: 0fr; transition: grid-template-rows 0.5s cubic-bezier(0.2, 0.9, 0.2, 1); }
.toggle-content.open { grid-template-rows: 1fr; }
.toggle-inner { overflow: hidden; min-height: 0; }
.toggle-inner > div { padding-top: 16px; padding-bottom: 24px; }

/* ========================================= */
/* ===== CONTENIDOS ======================== */
/* ========================================= */
.panel{ border:1px solid var(--border); background: rgba(255,255,255,.05); border-radius:26px; padding:18px; color:rgba(255,255,255,.8); line-height:1.6; max-width: 760px; width: 100%; }
.soft-box{ border:1px solid var(--border); background: rgba(255,255,255,.05); border-radius:26px; padding:18px; }
.soft-box.full{ grid-column:1 / -1 }
.dashed{ border:2px dashed rgba(255,255,255,.35); border-radius:20px; padding:14px; }
.icons{ display:flex; flex-wrap:wrap; gap:10px; }
.icon{ border:1px solid rgba(255,255,255,.10); background: rgba(0,0,0,.30); padding:10px 12px; border-radius:16px; font-size:14px; color:rgba(255,255,255,.85); }

/* RECORRIDO TIMELINE */
#recorrido{ --dotSize: 86px; --dotLeft: -98px; --padLeft: 98px; --lineW: 3px; }
#recorrido .timeline{ position: relative; margin-top: 8px; max-width: 980px; margin-left: auto; margin-right: auto; padding-left: var(--padLeft); display:flex; flex-direction:column; gap: 42px; padding-bottom: 30px; }
#recorrido .timeline::before{ content: ""; position: absolute; left: calc(var(--padLeft) + var(--dotLeft) + (var(--dotSize) / 2) - (var(--lineW) / 2)); top: calc(var(--dotSize) / 2); bottom: calc(var(--dotSize) / 2); width: var(--lineW); background: repeating-linear-gradient(to bottom, rgba(255,255,255,.7) 0px, rgba(255,255,255,.7) 6px, transparent 6px, transparent 12px); }
.dot{ position:absolute; left: var(--dotLeft); top: 0px; width: var(--dotSize); height: var(--dotSize); border-radius: 999px; background: #fff; display:flex; align-items:center; justify-content:center; overflow:hidden; }
.dot img{ width:100%; height:100%; object-fit: contain; padding: 10px; }
.t-content h4{ margin:0; font-size:18px; letter-spacing:.6px }
.t-content h4 span{ color:rgba(255,255,255,.65); font-weight:600 }
.t-content p{ margin:10px 0 0; color:rgba(255,255,255,.75); line-height:1.6 }

.reveal{ opacity:0; transform: translateY(18px); transition: .7s ease; }
.reveal.show{ opacity:1; transform: translateY(0); }

/* ABOUT ME */
.about-two-col { display: grid; grid-template-columns: 420px 1fr; gap: 40px; align-items: flex-start; max-width: 1000px; margin: 0 auto; }
.about-left { display: flex; flex-direction: column; align-items: center; text-align: center; margin-top: -20px; }
.pc-orbit-system { margin: 0 auto 16px auto !important; }
.about-name { font-weight: 300; font-size: clamp(32px, 5vw, 48px); letter-spacing: -1px; margin: 0 0 4px 0; color: rgba(255, 255, 255, 0.95); }
.about-email { font-size: 14px; color: rgba(255, 255, 255, 0.5); letter-spacing: 0.5px; }
.about-text { text-align: left; font-size: 17px; line-height: 1.6; color: rgba(255, 255, 255, 0.85); margin-top: 24px; }
.about-text p { margin-bottom: 20px; }
.about-highlight { font-style: italic; font-weight: 500; color: #fff; margin-top: 32px; }

/* ÓRBITA */
.pc-orbit-system { position: relative; width: 340px; height: 340px; display: flex; justify-content: center; align-items: center; }
.pc-orbit-system .photo-circle { position: relative; z-index: 2; width: 240px !important; height: 240px !important; flex-shrink: 0; margin: 0; border-radius: 50%; object-fit: cover; object-position: 50% 18%; border: 3px solid rgba(255,255,255,.15); box-shadow: 0 20px 60px rgba(0,0,0,.6); }
.orbit-container { position: absolute; inset: 0; z-index: 5; pointer-events: none; animation: spin-right 25s linear infinite; }
.orbit-wrapper { position: absolute; inset: 0; }
.pos-1 { --angle: 0deg;   transform: rotate(0deg); }
.pos-2 { --angle: 90deg;  transform: rotate(90deg); }
.pos-3 { --angle: 180deg; transform: rotate(180deg); }
.pos-4 { --angle: 270deg; transform: rotate(270deg); }
.social-icon-link { position: absolute; top: 50%; left: 50%; margin-top: calc(-150px - 48px); margin-left: -48px; width: 96px; height: 96px; pointer-events: auto; transition: scale 0.3s ease; animation: spin-left 25s linear infinite; }
.social-icon-link:hover { scale: 1.1; z-index: 10; filter: drop-shadow(0 0 15px rgba(255,255,255,0.3)); }
.social-icon-link img { width: 100%; height: 100%; object-fit: contain; filter: drop-shadow(0 8px 16px rgba(0,0,0,0.4)); transform: rotate(calc(-1 * var(--angle))); }
@keyframes spin-right { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
@keyframes spin-left { from { transform: rotate(360deg); } to { transform: rotate(0deg); } }

/* CAROUSEL Y TARJETAS */
.carousel { overflow: hidden; border-radius: 26px; padding: 8px 0; }
.track { display:flex; gap: 18px; width: max-content; animation: marquee 26s linear infinite; }
.marketing-track { animation: marquee-reverse 26s linear infinite; }
.carousel:hover .track { animation-play-state: paused; }
@keyframes marquee{ from{ transform: translateX(0); } to{ transform: translateX(-50%); } }
@keyframes marquee-reverse { from { transform: translateX(-50%); } to { transform: translateX(0); } }

.vcard{ width: 320px; height: 220px; border: 1px solid rgba(255,255,255,.12); border-radius: 26px; overflow: hidden; position: relative; background: rgba(255,255,255,.05); box-shadow: 0 20px 60px rgba(0,0,0,.35); cursor: pointer; padding: 0; }
.vcard-img { width: 100%; height: 100%; object-fit: cover; display: block; position: absolute; inset: 0; transition: .25s ease; z-index: 0; pointer-events: none; }
.vcard-overlay { position: absolute; inset: 0; background: rgba(0,0,0,.18); transition: .25s ease; z-index: 1; }
.vcard-text { position: absolute; left: 16px; right: 16px; bottom: 14px; opacity: 0; transform: translateY(10px); transition: .25s ease; z-index: 2; }
.vcard-title{ font-weight: 800; letter-spacing: .3px; }
.vcard-mini{ margin-top: 4px; font-size: 13px; color: rgba(255,255,255,.75); }
.vcard:hover{ transform: translateY(-10px); }
.vcard:hover .vcard-overlay{ background: rgba(0,0,0,.48); }
.vcard:hover .vcard-text{ opacity: 1; transform: translateY(0); }

/* TARJETAS CON ZÓCALO */
.vcard.mk-card { height: 250px; display: flex; flex-direction: column; justify-content: flex-end; }
.vcard.mk-card .vcard-img { position: relative; height: 150px; border-bottom-left-radius: 0; border-bottom-right-radius: 0; border-bottom: 1px solid rgba(255,255,255,0.1); }
.vcard.mk-card .card-bottom { flex-grow: 1; background: rgba(0, 0, 0, 0.2); display: flex; align-items: center; justify-content: space-between; padding: 18px; z-index: 2; position: relative; }
.card-bottom h3 { margin:0; font-size:16px; line-height:1.2; color:rgba(255,255,255,.9); text-align:left; }
.tag { font-size:11px; font-weight:800; padding:6px 10px; border-radius:999px; letter-spacing:.5px; }
.blue { background:rgba(2,132,199,.9) }
.amber { background:rgba(245,158,11,.9); color:#000 }
.green { background:rgba(16,185,129,.9) }

/* MODAL */
.modal { position: fixed; inset: 0; z-index: 2000; padding: 20px; display: flex; align-items: center; justify-content: center; visibility: hidden; pointer-events: none; transition: visibility 0.5s ease; }
.modal.show { visibility: visible; pointer-events: auto; }
.modal-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,.70); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); opacity: 0; transition: opacity 0.4s ease; }
.modal.show .modal-backdrop { opacity: 1; }
.modal-card { position: relative; width: 100%; max-width: 1100px; background: rgba(20,20,20,.85); border: 1px solid rgba(255,255,255,.15); border-radius: 26px; box-shadow: 0 40px 100px rgba(0,0,0,.8); padding: 32px; opacity: 0; transform: translate(var(--dx, 0px), var(--dy, 0px)) scale(0.15); transition: transform 0.5s cubic-bezier(0.2, 0.9, 0.2, 1), opacity 0.4s ease; }
.modal.show .modal-card { opacity: 1; transform: translate(0, 0) scale(1); }
.modal-x { position: absolute; top: -18px; right: -18px; width: 44px; height: 44px; border: 1px solid rgba(255,255,255,.2); background: #111; color: #fff; border-radius: 50%; cursor: pointer; z-index: 100; display: flex; align-items: center; justify-content: center; font-size: 18px; transition: 0.2s ease; box-shadow: 0 8px 24px rgba(0,0,0,0.5); }
.modal-x:hover { background: #333; transform: scale(1.1); }
.modal-grid { display: grid; grid-template-columns: 400px 1fr; gap: 32px; }
.modal-left { display: flex; flex-direction: column; justify-content: center; }
.modal-avatar { width: 160px; height: 160px; border-radius: 50%; object-fit: cover; border: 3px solid rgba(255,255,255,.15); box-shadow: 0 16px 50px rgba(0,0,0,.45); margin-bottom: 16px; }
.modal-title { margin: 0 0 12px; font-size: 28px; line-height: 1.2; }
.modal-desc { margin: 0; color: rgba(255,255,255,.85); line-height: 1.6; font-size: 15px; }
.modal-left > *, .modal-right video, .modal-right img, .modal-right iframe { opacity: 0; transform: translateY(15px); transition: transform 0.4s ease, opacity 0.4s ease; }
.modal.show .modal-left > *, .modal.show .modal-right video, .modal.show .modal-right img, .modal.show .modal-right iframe { opacity: 1; transform: translateY(0); }
.modal.show .modal-left > :nth-child(1) { transition-delay: 0.1s; }
.modal.show .modal-left > :nth-child(2) { transition-delay: 0.2s; }
.modal.show .modal-left > :nth-child(3) { transition-delay: 0.3s; }
.modal-right { border-left: 1px solid rgba(255,255,255,.10); padding-left: 32px; max-height: 70vh; overflow-y: auto; display: grid; grid-template-columns: 1fr 1fr; gap: 16px; align-items: start; -ms-overflow-style: none; scrollbar-width: none; }
.modal-right::-webkit-scrollbar { display: none; }
.modal-right video, .modal-right img, .modal-right iframe { width: 100%; border-radius: 18px; background:#000; border: 1px solid rgba(255,255,255,.10); object-fit: cover; }
.modal-right iframe { aspect-ratio: 16 / 9; }
.modal-right video:nth-child(even), .modal-right img:nth-child(even), .modal-right iframe:nth-child(even) { margin-top: 40px; }
.modal-right .horizontal-media { grid-column: 1 / -1; margin-top: 20px !important; background: transparent; }

/* INTRO ANIMACIÓN ESCÁNER */
body:not(.entered):not(.morphing) { background: #fff; color: #111; overflow: hidden; }
body:not(.entered):not(.morphing) .stars { opacity: 0; }
.intro { position: fixed; inset: 0; z-index: 5000; display: flex; flex-direction: column; align-items: center; justify-content: center; padding-bottom: 15vh; background: transparent; }
.intro-inner { text-align: center; display: flex; flex-direction: column; align-items: center; z-index: 2; }
.intro-name { font-family: ui-serif, Georgia, "Times New Roman", serif; font-size: clamp(34px, 6vw, 70px); letter-spacing: .5px; color: #111; margin-bottom: 16px; transition: opacity 0.3s ease; }
body.morphing { background: #000; color: #fff; overflow: hidden; }
body.morphing .stars { opacity: 0.7; }
body.morphing .intro-name, body.morphing .intro-btn { opacity: 0; }
body:not(.entered) .nav-sticky { opacity: 0; pointer-events: none; }
body:not(.entered):not(.revealing) main.wrap { opacity: 0; pointer-events: none; transform: translateY(80px); clip-path: inset(100% 0 0 0); }
body.revealing main.wrap { opacity: 1; transform: translateY(0); clip-path: inset(0% 0 0 0); transition: clip-path 0.6s cubic-bezier(0.34, 1.2, 0.64, 1), transform 0.6s cubic-bezier(0.34, 1.2, 0.64, 1), opacity 0.4s ease; }
body.entered { background: #000; color: #fff; overflow: auto; }
body.entered .intro { display: none; }
body.entered .nav-sticky { opacity: 1; }
body.entered .nav > * { animation: fadeNavText 0.5s ease forwards; }
body.entered main.wrap { opacity: 1; transform: translateY(0); clip-path: inset(0% 0 0 0); }
@keyframes fadeNavText { 0% { opacity: 0; } 100% { opacity: 1; } }

/* RESPONSIVE */
@media (max-width: 900px) {
  .grid{grid-template-columns:1fr}
  .two-col{grid-template-columns:1fr !important; gap: 18px !important; align-items: start !important;}
  .soft-grid{grid-template-columns:1fr}
  .contact{flex-direction:column; align-items:flex-start}
  #recorrido{ --dotSize: 70px; --dotLeft: -78px; --padLeft: 46px; }
  .photo-box{ order: 1; margin: 0 auto; }
  .about-right{ order: 2; max-width: 100% !important; }
  .h2{ text-align: center; margin-bottom: 14px; }
  .panel{ max-width: 100% !important; border-radius: 22px; }

  .about-two-col { grid-template-columns: 1fr; gap: 32px; }
  .about-text { text-align: center; }

  .pc-orbit-system { width: 230px; height: 230px; }
  .pc-orbit-system .photo-circle { width: 160px !important; height: 160px !important; }
  .social-icon-link { width: 64px; height: 64px; margin-top: calc(-115px - 32px); margin-left: -32px; }

  #video .track{ animation-duration: 34s; }
  .vcard{ width: 260px; height: 190px; }
  .vcard.mk-card { height: 220px; }

  .modal { padding: 12px; } 
  .modal-card { padding: 24px; }
  .modal-x { top: -10px; right: -6px; width: 38px; height: 38px; }
  .modal-grid { grid-template-columns: 1fr; gap: 24px; }
  .modal-right { border-left: 0; padding-left: 0; max-height: 50vh; display: flex; flex-direction: column; }
  .modal-right video:nth-child(even), .modal-right img:nth-child(even), .modal-right iframe:nth-child(even) { margin-top: 0; }
}